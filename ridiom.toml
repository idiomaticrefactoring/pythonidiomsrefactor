# ===============================================
#  RIdiom (RefactoringIdioms) 工具的配置
#  (支持正向 "refactor" 和反向 "explain")
# ===============================================

[ridiom]
# 1. 全局配置 (Global Configuration)
# 这些设置对所有模式都有效

# 要检查的路径。["."] 代表从当前目录开始扫描。
include = ["."]

# 要排除的文件和目录。
exclude = [
    ".git",
    ".venv",
    "venv",
    ".ruff_cache",
    ".pytest_cache",
    ".mypy_cache",
    "build",
    "dist",
    "__pypackages__",
]

# 允许使用 # noqa: RID001 这样的内联注释来禁用检查。
enable-noqa = true


# ===============================================
# 2. 核心转换配置 (Core Transformation)
# ===============================================
# "mode" 用于选择工具的行为
#
# "refactor" = (RIdiom 模式)
#   正向转换：检测“非地道”代码，并将其重构为“地道”代码。
#
# "explain" = (Deldiom 模式)
#   反向转换：检测“地道”代码，并将其转换为“非地道”代码以供解释。
mode = "refactor" # 默认保持为 RIdiom 模式


# ===============================================
# 3. 规则配置 (Rules Configuration)
# ===============================================
[ridiom.rules]
# 规则选择列表。
select = [
    "list-comprehension",
    "set-comprehension",
    "dict-comprehension",
    "chain-comparison",
    "truth-value-test",
    "for-else",
    "assign-multiple-targets",
    "star-in-func-call",
    "for-multiple-targets",
]

# 在 "全选" 模式 (即 select = []) 下，明确禁用某些规则。
ignore = []

# --- 细粒度规则配置 ---
# 以下设置为每条规则提供了更精细的控制

[ridiom.rules.list-comprehension]
# 是否转换带 if 条件的列表推导式。
refactor-with-if = true

[ridiom.rules.set-comprehension]
# 是否转换带 if 条件的集合推导式。
refactor-with-if = true

[ridiom.rules.dict-comprehension]
# 是否转换带 if 条件的字典推导式。
refactor-with-if = true

[ridiom.rules.chain-comparison]
# 重构限制的最多*操作数*数量。
# 设为 false 意味着此规则默认*禁用*，
max-operands-to-refactor = false

[ridiom.rules.assign-multiple-targets]
# 重构限制的最多*赋值*数量。
# 设为 false 意味着此规则默认*禁用*。
max-assignments-to-refactor = false

[ridiom.rules.star-in-func-call]
#重构限制的最多*连续解包元素*数量。
# 设为 false 意味着此规则默认*禁用*。
max-elements-to-unpack = false

[ridiom.rules.for-multiple-targets]
#重构限制的最多*循环体内解包元素*数量。
# 设为 false 意味着此规则默认*禁用*。
max-elements-to-unpack = false


# ===============================================
# 4. 输出配置 (Output Configuration)
# ===============================================
[ridiom.output]
# 指定输出文件的路径 
file = "report.json"
